#!/usr/bin/env python3
"""
Script para configurar RDS MySQL na AWS
"""

print('ğŸ—„ï¸ CONFIGURANDO RDS MYSQL NA AWS')
print('=' * 60)

print('âœ… EXCELENTE ESCOLHA!')
print('   RDS Ã© muito mais profissional e confiÃ¡vel')
print('   - âœ… Backup automÃ¡tico')
print('   - âœ… Escalabilidade')
print('   - âœ… Alta disponibilidade')
print('   - âœ… Monitoramento')
print('   - âœ… SSL automÃ¡tico')
print()

print('ğŸ¯ PASSO 1: CRIAR RDS MYSQL')
print('=' * 50)
print('1. ğŸŒ Acessar AWS Console')
print('   https://console.aws.amazon.com')
print()
print('2. ğŸ” Procurar por "RDS"')
print('   - Digite "RDS" na barra de pesquisa')
print('   - Clique em "RDS" (Relational Database Service)')
print()
print('3. â• Criar banco de dados')
print('   - Clique em "Create database"')
print('   - Escolha "MySQL"')
print('   - Template: "Free tier"')
print()
print('4. ğŸ“‹ Configurar instÃ¢ncia')
print('   - DB instance identifier: mercadolivre-db')
print('   - Master username: admin')
print('   - Master password: MercadoLivre2024! (senha forte)')
print('   - DB instance class: db.t2.micro (Free tier)')
print('   - Storage: 20 GB (Free tier)')
print()
print('5. ğŸ”§ ConfiguraÃ§Ãµes avanÃ§adas')
print('   - VPC: Default VPC')
print('   - Subnet group: Default')
print('   - Security group: Create new')
print('   - Port: 3306')
print()
print('6. ğŸš€ Criar banco')
print('   - Clique em "Create database"')
print('   - Aguarde criaÃ§Ã£o (5-10 minutos)')
print()

print('ğŸ¯ PASSO 2: CONFIGURAR SECURITY GROUP')
print('=' * 50)
print('1. ğŸ” Procurar por "EC2"')
print('   - Digite "EC2" na barra de pesquisa')
print('   - Clique em "EC2"')
print()
print('2. ğŸ“‹ Ir em "Security Groups"')
print('   - Menu lateral > "Security Groups"')
print()
print('3. ğŸ¯ Encontrar Security Group do RDS')
print('   - Procure por "mercadolivre-db" ou similar')
print('   - Clique no Security Group')
print()
print('4. âœï¸ Editar "Inbound rules"')
print('   - Clique em "Edit inbound rules"')
print('   - Adicionar regra:')
print('     - Type: MySQL/Aurora')
print('     - Port: 3306')
print('     - Source: Custom')
print('     - IP: 0.0.0.0/0 (para permitir acesso da EC2)')
print('   - Clique em "Save rules"')
print()

print('ğŸ¯ PASSO 3: OBTER ENDPOINT')
print('=' * 50)
print('1. ğŸ” Voltar para RDS')
print('   - Digite "RDS" na barra de pesquisa')
print('   - Clique em "RDS"')
print()
print('2. ğŸ“‹ Ir em "Databases"')
print('   - Clique em "Databases"')
print()
print('3. ğŸ¯ Clicar no banco criado')
print('   - Clique em "mercadolivre-db"')
print()
print('4. ğŸ“‹ Copiar endpoint')
print('   - Copie o "Endpoint"')
print('   - Exemplo: mercadolivre-db.xxxxxxxxxxxx.sa-east-1.rds.amazonaws.com')
print()

print('ğŸ¯ PASSO 4: CONFIGURAR APLICAÃ‡ÃƒO')
print('=' * 50)
print('1. ğŸ“ Editar arquivo .env na EC2')
print('   nano /home/ec2-user/mercadolivre-app/.env')
print()
print('2. ğŸ”„ Atualizar configuraÃ§Ãµes do banco')
print('   DB_HOST=mercadolivre-db.xxxxxxxxxxxx.sa-east-1.rds.amazonaws.com')
print('   DB_USER=admin')
print('   DB_PASSWORD=MercadoLivre2024!')
print('   DB_NAME=sistema_ml')
print('   DB_PORT=3306')
print('   DB_SSL_MODE=REQUIRED')
print()
print('3. ğŸ’¾ Salvar arquivo')
print('   Ctrl+X, Y, Enter')
print()

print('ğŸ¯ PASSO 5: TESTAR CONEXÃƒO')
print('=' * 50)
print('1. ğŸ”§ Instalar cliente MySQL na EC2')
print('   sudo yum install mysql -y')
print()
print('2. ğŸ§ª Testar conexÃ£o')
print('   mysql -h mercadolivre-db.xxxxxxxxxxxx.sa-east-1.rds.amazonaws.com \\')
print('         -u admin -p')
print('   # Digite a senha: MercadoLivre2024!')
print()
print('3. ğŸ—„ï¸ Criar banco de dados')
print('   CREATE DATABASE sistema_ml;')
print('   USE sistema_ml;')
print('   SHOW TABLES;')
print('   EXIT;')
print()

print('ğŸ¯ PASSO 6: REINICIAR APLICAÃ‡ÃƒO')
print('=' * 50)
print('1. ğŸš€ Reiniciar serviÃ§os')
print('   sudo systemctl restart flask-app')
print('   sudo systemctl restart nginx')
print()
print('2. âœ… Verificar status')
print('   sudo systemctl status flask-app')
print('   sudo systemctl status nginx')
print()
print('3. ğŸ“‹ Verificar logs')
print('   sudo journalctl -u flask-app -f')
print()

print('ğŸ¯ RESUMO DOS PASSOS:')
print('=' * 50)
print('1. ğŸ—ï¸ Criar RDS MySQL (AWS Console)')
print('2. ğŸ”§ Configurar Security Group')
print('3. ğŸ“‹ Obter endpoint')
print('4. âš™ï¸ Configurar aplicaÃ§Ã£o')
print('5. ğŸ§ª Testar conexÃ£o')
print('6. ğŸš€ Reiniciar aplicaÃ§Ã£o')
print()

print('ğŸ’¡ DICAS IMPORTANTES:')
print('=' * 50)
print('ğŸ”’ SeguranÃ§a:')
print('   - Use senha forte')
print('   - Configure Security Group corretamente')
print('   - Use SSL (DB_SSL_MODE=REQUIRED)')
print()
print('âš¡ Performance:')
print('   - RDS Ã© muito mais rÃ¡pido que MySQL local')
print('   - Backup automÃ¡tico')
print('   - Escalabilidade automÃ¡tica')
print()
print('ğŸ’° Custos:')
print('   - Free Tier: 750 horas/mÃªs por 12 meses')
print('   - Depois: ~$15-20/mÃªs')
print()

print('ğŸ‰ VANTAGENS DO RDS:')
print('=' * 50)
print('âœ… Backup automÃ¡tico')
print('âœ… Escalabilidade')
print('âœ… Alta disponibilidade')
print('âœ… Monitoramento')
print('âœ… SSL automÃ¡tico')
print('âœ… ManutenÃ§Ã£o automÃ¡tica')
print('âœ… Performance otimizada')
print()

print('ğŸš€ SUA APLICAÃ‡ÃƒO ESTARÃ PROFISSIONAL!')
print('RDS Ã© a escolha certa para produÃ§Ã£o!')
