#!/usr/bin/env python3
"""
Script para corrigir configuraÃ§Ã£o de firewall no Amazon Linux 2023
"""

print('ğŸ”¥ CORRIGINDO FIREWALL NO AMAZON LINUX 2023')
print('=' * 60)

print('âŒ PROBLEMA IDENTIFICADO:')
print('   firewall-cmd: command not found')
print()
print('ğŸ’¡ EXPLICAÃ‡ÃƒO:')
print('   O Amazon Linux 2023 usa "iptables" em vez de "firewalld"')
print('   Por isso o comando firewall-cmd nÃ£o funciona')
print()

print('âœ… SOLUÃ‡ÃƒO: USAR IPTABLES')
print('=' * 40)
print('1. ğŸ”§ Instalar iptables (se necessÃ¡rio):')
print('   sudo yum install iptables-services -y')
print()
print('2. ğŸ”¥ Configurar regras de firewall:')
print('   sudo iptables -A INPUT -p tcp --dport 22 -j ACCEPT')
print('   sudo iptables -A INPUT -p tcp --dport 80 -j ACCEPT')
print('   sudo iptables -A INPUT -p tcp --dport 443 -j ACCEPT')
print('   sudo iptables -A INPUT -j DROP')
print()
print('3. ğŸ’¾ Salvar regras:')
print('   sudo service iptables save')
print()
print('4. ğŸš€ Habilitar iptables:')
print('   sudo systemctl enable iptables')
print('   sudo systemctl start iptables')
print()

print('ğŸ¯ COMANDOS COMPLETOS PARA EXECUTAR:')
print('=' * 50)
print('# Instalar iptables')
print('sudo yum install iptables-services -y')
print()
print('# Configurar regras')
print('sudo iptables -A INPUT -p tcp --dport 22 -j ACCEPT')
print('sudo iptables -A INPUT -p tcp --dport 80 -j ACCEPT')
print('sudo iptables -A INPUT -p tcp --dport 443 -j ACCEPT')
print('sudo iptables -A INPUT -j DROP')
print()
print('# Salvar e habilitar')
print('sudo service iptables save')
print('sudo systemctl enable iptables')
print('sudo systemctl start iptables')
print()

print('ğŸ” VERIFICAR CONFIGURAÃ‡ÃƒO:')
print('=' * 40)
print('1. ğŸ“‹ Ver regras ativas:')
print('   sudo iptables -L')
print()
print('2. âœ… Verificar status:')
print('   sudo systemctl status iptables')
print()
print('3. ğŸŒ Testar conectividade:')
print('   curl -I http://localhost')
print('   curl -I http://SEU_IP_PUBLICO')
print()

print('ğŸš¨ ALTERNATIVA: USAR SECURITY GROUPS')
print('=' * 50)
print('ğŸ’¡ DICA: O mais fÃ¡cil Ã© configurar no AWS Console:')
print()
print('1. ğŸŒ Acessar AWS Console')
print('2. ğŸ” Procurar por "EC2"')
print('3. ğŸ“‹ Ir em "Security Groups"')
print('4. ğŸ¯ Encontrar o Security Group da sua instÃ¢ncia')
print('5. âœï¸ Editar "Inbound rules"')
print('6. â• Adicionar regras:')
print('   - Type: SSH, Port: 22, Source: My IP')
print('   - Type: HTTP, Port: 80, Source: 0.0.0.0/0')
print('   - Type: HTTPS, Port: 443, Source: 0.0.0.0/0')
print('7. ğŸ’¾ Salvar regras')
print()

print('ğŸ¯ RESUMO:')
print('=' * 30)
print('âœ… Problema: firewall-cmd nÃ£o existe no Amazon Linux 2023')
print('âœ… SoluÃ§Ã£o 1: Usar iptables (comandos acima)')
print('âœ… SoluÃ§Ã£o 2: Configurar Security Groups no AWS Console')
print('âœ… RecomendaÃ§Ã£o: Usar Security Groups (mais fÃ¡cil)')
print()

print('ğŸš€ PRÃ“XIMOS PASSOS:')
print('=' * 30)
print('1. ğŸ”§ Configurar firewall (iptables ou Security Groups)')
print('2. âœ… Verificar status dos serviÃ§os')
print('3. ğŸŒ Testar aplicaÃ§Ã£o no navegador')
print('4. ğŸ“‹ Verificar logs se necessÃ¡rio')
print()

print('ğŸ‰ SUA APLICAÃ‡ÃƒO ESTÃ QUASE PRONTA!')
print('SÃ³ falta configurar o firewall e testar!')
