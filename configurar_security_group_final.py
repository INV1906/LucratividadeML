#!/usr/bin/env python3
"""
Script para configurar Security Group do RDS com IP do EC2
"""

print('ğŸ”’ CONFIGURANDO SECURITY GROUP DO RDS')
print('=' * 50)

# IP privado do EC2
EC2_PRIVATE_IP = "172.31.2.15"

print(f'ğŸ¯ IP PRIVADO DO EC2: {EC2_PRIVATE_IP}')
print()

print('âœ… CONFIGURAÃ‡ÃƒO DO SECURITY GROUP:')
print('=' * 50)
print('ğŸ“‹ REGRA PARA ADICIONAR:')
print('   Type: MySQL/Aurora')
print('   Protocol: TCP')
print('   Port: 3306')
print(f'   Source: {EC2_PRIVATE_IP}/32')
print()

print('ğŸ”§ PASSOS NO AWS CONSOLE:')
print('=' * 40)
print('1. ğŸŒ Acessar: https://console.aws.amazon.com')
print('2. ğŸ” Navegar: Services â†’ RDS â†’ Databases')
print('3. ğŸ“‹ Selecionar: mercadolivre-db')
print('4. ğŸ”’ Ir para: Connectivity & security â†’ VPC security groups')
print('5. âš™ï¸ Editar: Actions â†’ Edit inbound rules')
print('6. â• Adicionar regra:')
print('   - Type: MySQL/Aurora')
print('   - Protocol: TCP')
print('   - Port: 3306')
print(f'   - Source: {EC2_PRIVATE_IP}/32')
print('7. ğŸ’¾ Salvar: Save rules')
print()

print('ğŸ¯ CONFIGURAÃ‡ÃƒO EXATA:')
print('=' * 30)
print('ğŸ“‹ Inbound Rules:')
print('   Rule 1:')
print('   - Type: MySQL/Aurora')
print('   - Protocol: TCP')
print('   - Port: 3306')
print(f'   - Source: {EC2_PRIVATE_IP}/32')
print('   - Description: Allow EC2 access to RDS')
print()

print('â±ï¸ TEMPO DE PROPAGAÃ‡ÃƒO:')
print('=' * 30)
print('â° Security Group: 1-2 minutos')
print('â° Total: 2-3 minutos')
print()

print('ğŸ§ª APÃ“S CONFIGURAR:')
print('=' * 30)
print('1. â³ Aguardar 2-3 minutos')
print('2. ğŸ§ª Testar conexÃ£o:')
print('   python3.11 test_rds_connection.py')
print('3. ğŸ—„ï¸ Criar banco:')
print('   python3.11 create_database.py')
print()

print('ğŸ” VERIFICAR SE FUNCIONOU:')
print('=' * 40)
print('âœ… Se a conexÃ£o funcionar:')
print('   - RDS conectado')
print('   - Banco criado')
print('   - AplicaÃ§Ã£o configurada')
print()
print('âŒ Se ainda der erro:')
print('   - Verificar se regra foi salva')
print('   - Aguardar mais tempo')
print('   - Verificar IP correto')
print()

print('ğŸš¨ IMPORTANTE:')
print('=' * 20)
print(f'âœ… IP do EC2: {EC2_PRIVATE_IP}')
print('âœ… Formato: IP/32')
print(f'âœ… Regra: {EC2_PRIVATE_IP}/32')
print('âœ… Aguarde 2-3 minutos')
print()

print('ğŸš€ CONFIGURE O SECURITY GROUP E TESTE!')
print('=' * 50)
print('1. ğŸ”’ Configurar Security Group')
print('2. â³ Aguardar 2-3 minutos')
print('3. ğŸ§ª Testar conexÃ£o')
print('4. ğŸ—„ï¸ Criar banco')
print('5. âš™ï¸ Configurar aplicaÃ§Ã£o')
print('6. ğŸš€ Reiniciar aplicaÃ§Ã£o')
print('7. ğŸŒ Testar aplicaÃ§Ã£o online')
