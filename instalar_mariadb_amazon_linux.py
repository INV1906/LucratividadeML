#!/usr/bin/env python3
"""
Script para instalar MariaDB no Amazon Linux 2023
"""

print('ğŸ—„ï¸ INSTALANDO MARIADB NO AMAZON LINUX 2023')
print('=' * 60)

print('âŒ PROBLEMA IDENTIFICADO:')
print('   No match for argument: mysql')
print()
print('ğŸ’¡ EXPLICAÃ‡ÃƒO:')
print('   No Amazon Linux 2023, nem MySQL nem MariaDB estÃ£o nos repositÃ³rios padrÃ£o')
print('   Precisa habilitar repositÃ³rios extras ou usar MariaDB')
print()

print('âœ… SOLUÃ‡ÃƒO: INSTALAR MARIADB')
print('=' * 50)
print('ğŸ”§ COMANDOS CORRETOS:')
print()
print('1. ğŸ“¦ Instalar MariaDB:')
print('   sudo yum install mariadb-server -y')
print()
print('2. ğŸš€ Iniciar MariaDB:')
print('   sudo systemctl start mariadb')
print('   sudo systemctl enable mariadb')
print()
print('3. ğŸ”§ Configurar MariaDB:')
print('   sudo mysql_secure_installation')
print('   # Responda: Y, Y, N, Y, Y')
print()
print('4. ğŸ—„ï¸ Criar banco de dados:')
print('   sudo mysql -u root -p')
print('   # No MySQL/MariaDB:')
print('   CREATE DATABASE sistema_ml;')
print('   CREATE USER "admin"@"%" IDENTIFIED BY "2154";')
print('   GRANT ALL PRIVILEGES ON sistema_ml.* TO "admin"@"%";')
print('   FLUSH PRIVILEGES;')
print('   EXIT;')
print()

print('ğŸ¯ COMANDOS COMPLETOS PARA EXECUTAR:')
print('=' * 50)
print('# 1. Instalar MariaDB')
print('sudo yum install mariadb-server -y')
print()
print('# 2. Iniciar MariaDB')
print('sudo systemctl start mariadb')
print('sudo systemctl enable mariadb')
print()
print('# 3. Configurar MariaDB')
print('sudo mysql_secure_installation')
print()
print('# 4. Criar banco de dados')
print('sudo mysql -u root -p')
print('# Executar comandos SQL acima')
print()
print('# 5. Verificar status')
print('sudo systemctl status mariadb')
print()
print('# 6. Reiniciar aplicaÃ§Ã£o')
print('sudo systemctl restart flask-app')
print()

print('ğŸ” VERIFICAR INSTALAÃ‡ÃƒO:')
print('=' * 40)
print('ğŸ“‹ Verificar se MariaDB estÃ¡ instalado:')
print('   mysql --version')
print()
print('ğŸ“‹ Verificar status do serviÃ§o:')
print('   sudo systemctl status mariadb')
print()
print('ğŸ“‹ Verificar se estÃ¡ rodando:')
print('   sudo systemctl is-active mariadb')
print()
print('ğŸ“‹ Verificar se estÃ¡ habilitado:')
print('   sudo systemctl is-enabled mariadb')
print()

print('ğŸš¨ ALTERNATIVA: USAR SQLITE')
print('=' * 50)
print('ğŸ’¡ DICA: Se MariaDB nÃ£o funcionar, use SQLite:')
print()
print('1. ğŸ“¦ SQLite jÃ¡ vem instalado')
print('2. ğŸ”§ Modificar database.py para usar SQLite')
print('3. ğŸ—„ï¸ Criar banco local')
print('4. âœ… Funciona sem configuraÃ§Ã£o adicional')
print()

print('ğŸ¯ RESUMO:')
print('=' * 30)
print('âœ… Problema: MySQL nÃ£o disponÃ­vel no Amazon Linux 2023')
print('âœ… SoluÃ§Ã£o 1: Usar MariaDB (compatÃ­vel com MySQL)')
print('âœ… SoluÃ§Ã£o 2: Usar SQLite (mais simples)')
print('âœ… RecomendaÃ§Ã£o: Tentar MariaDB primeiro')
print()

print('ğŸš€ PRÃ“XIMOS PASSOS:')
print('=' * 30)
print('1. ğŸ”§ Instalar MariaDB')
print('2. ğŸ—„ï¸ Configurar banco de dados')
print('3. ğŸš€ Reiniciar aplicaÃ§Ã£o')
print('4. âœ… Verificar status')
print('5. ğŸŒ Testar aplicaÃ§Ã£o')
print()

print('ğŸ‰ APÃ“S CORRIGIR:')
print('=' * 30)
print('âœ… MariaDB: active (running)')
print('âœ… Flask-app: active (running)')
print('âœ… Nginx: active (running)')
print('âœ… AplicaÃ§Ã£o: http://SEU_IP_PUBLICO')
print()

print('ğŸš€ SUA APLICAÃ‡ÃƒO ESTARÃ FUNCIONANDO!')
print('MariaDB Ã© compatÃ­vel com MySQL e funciona perfeitamente!')
