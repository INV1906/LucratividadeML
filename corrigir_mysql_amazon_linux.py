#!/usr/bin/env python3
"""
Script para corrigir instalaÃ§Ã£o do MySQL no Amazon Linux 2023
"""

print('ğŸ—„ï¸ CORRIGINDO INSTALAÃ‡ÃƒO MYSQL NO AMAZON LINUX 2023')
print('=' * 60)

print('âŒ PROBLEMA IDENTIFICADO:')
print('   No match for argument: mysql-server')
print()
print('ğŸ’¡ EXPLICAÃ‡ÃƒO:')
print('   No Amazon Linux 2023, o MySQL tem nome diferente')
print('   Precisa usar "mysql" em vez de "mysql-server"')
print()

print('âœ… SOLUÃ‡ÃƒO: INSTALAR MYSQL CORRETO')
print('=' * 50)
print('ğŸ”§ COMANDOS CORRETOS:')
print()
print('1. ğŸ“¦ Instalar MySQL:')
print('   sudo yum install mysql -y')
print()
print('2. ğŸš€ Iniciar MySQL:')
print('   sudo systemctl start mysqld')
print('   sudo systemctl enable mysqld')
print()
print('3. ğŸ”§ Configurar MySQL:')
print('   sudo mysql_secure_installation')
print('   # Responda: Y, Y, N, Y, Y')
print()
print('4. ğŸ—„ï¸ Criar banco de dados:')
print('   sudo mysql -u root -p')
print('   # No MySQL:')
print('   CREATE DATABASE sistema_ml;')
print('   CREATE USER "admin"@"%" IDENTIFIED BY "2154";')
print('   GRANT ALL PRIVILEGES ON sistema_ml.* TO "admin"@"%";')
print('   FLUSH PRIVILEGES;')
print('   EXIT;')
print()

print('ğŸ¯ COMANDOS COMPLETOS PARA EXECUTAR:')
print('=' * 50)
print('# 1. Instalar MySQL (nome correto)')
print('sudo yum install mysql -y')
print()
print('# 2. Iniciar MySQL')
print('sudo systemctl start mysqld')
print('sudo systemctl enable mysqld')
print()
print('# 3. Configurar MySQL')
print('sudo mysql_secure_installation')
print()
print('# 4. Criar banco de dados')
print('sudo mysql -u root -p')
print('# Executar comandos SQL acima')
print()
print('# 5. Verificar status')
print('sudo systemctl status mysqld')
print()
print('# 6. Reiniciar aplicaÃ§Ã£o')
print('sudo systemctl restart flask-app')
print()

print('ğŸ” VERIFICAR INSTALAÃ‡ÃƒO:')
print('=' * 40)
print('ğŸ“‹ Verificar se MySQL estÃ¡ instalado:')
print('   mysql --version')
print()
print('ğŸ“‹ Verificar status do serviÃ§o:')
print('   sudo systemctl status mysqld')
print()
print('ğŸ“‹ Verificar se estÃ¡ rodando:')
print('   sudo systemctl is-active mysqld')
print()
print('ğŸ“‹ Verificar se estÃ¡ habilitado:')
print('   sudo systemctl is-enabled mysqld')
print()

print('ğŸš¨ ALTERNATIVA: USAR MARIADB')
print('=' * 50)
print('ğŸ’¡ DICA: Se MySQL nÃ£o funcionar, use MariaDB:')
print()
print('1. ğŸ“¦ Instalar MariaDB:')
print('   sudo yum install mariadb-server -y')
print()
print('2. ğŸš€ Iniciar MariaDB:')
print('   sudo systemctl start mariadb')
print('   sudo systemctl enable mariadb')
print()
print('3. ğŸ”§ Configurar MariaDB:')
print('   sudo mysql_secure_installation')
print()
print('4. ğŸ—„ï¸ Criar banco de dados:')
print('   sudo mysql -u root -p')
print('   # Comandos SQL sÃ£o os mesmos')
print()

print('ğŸ¯ RESUMO:')
print('=' * 30)
print('âœ… Problema: mysql-server nÃ£o existe no Amazon Linux 2023')
print('âœ… SoluÃ§Ã£o 1: Usar "mysql" em vez de "mysql-server"')
print('âœ… SoluÃ§Ã£o 2: Usar MariaDB como alternativa')
print('âœ… RecomendaÃ§Ã£o: Tentar MySQL primeiro, depois MariaDB')
print()

print('ğŸš€ PRÃ“XIMOS PASSOS:')
print('=' * 30)
print('1. ğŸ”§ Instalar MySQL com nome correto')
print('2. ğŸ—„ï¸ Configurar banco de dados')
print('3. ğŸš€ Reiniciar aplicaÃ§Ã£o')
print('4. âœ… Verificar status')
print('5. ğŸŒ Testar aplicaÃ§Ã£o')
print()

print('ğŸ‰ APÃ“S CORRIGIR:')
print('=' * 30)
print('âœ… MySQL: active (running)')
print('âœ… Flask-app: active (running)')
print('âœ… Nginx: active (running)')
print('âœ… AplicaÃ§Ã£o: http://SEU_IP_PUBLICO')
print()

print('ğŸš€ SUA APLICAÃ‡ÃƒO ESTARÃ FUNCIONANDO!')
print('SÃ³ precisa instalar o MySQL com o nome correto!')
